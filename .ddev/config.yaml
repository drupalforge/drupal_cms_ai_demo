type: drupal11
docroot: web
php_version: "8.3"
webserver_type: apache-fpm
xdebug_enabled: false
additional_hostnames: []
additional_fqdns: []
database:
    type: mysql
    version: "8.0"
hooks:
    post-start:
        # Set up debugging.
        - exec: test -f .vscode/launch.json || mkdir -p .vscode && cp .ddev/launch.json .vscode/
        # Remove nested .ddev directories from contrib modules
        - exec: rm -rf web/modules/contrib/*/.ddev || true
        # Reset any uncommitted changes in contrib modules to allow composer updates
        - exec: |
            for module_dir in web/modules/contrib/*; do
              if [ -d "$module_dir/.git" ]; then
                echo "Resetting git changes in $(basename $module_dir)..."
                cd "$module_dir" && git reset --hard HEAD && git clean -fd && cd - > /dev/null
              fi
            done || true
        # Run initial setup tasks.
        - exec: .devpanel/init.sh && drush cr
use_dns_when_possible: true
composer_version: "2"
web_environment:
    # Set up DevPanel variables.
    - APP_ROOT=$DDEV_COMPOSER_ROOT
    - WEB_ROOT=$DDEV_COMPOSER_ROOT/$DDEV_DOCROOT
    - DB_HOST=db
    - DB_PORT=3306
    - DB_USER=db
    - DB_PASSWORD=db
    - DB_NAME=db
    - DP_APP_ID=ai_demo_flowdrop
    - DB_DRIVER=mysql
    - DP_AI_VIRTUAL_KEY=
corepack_enable: false
ddev_version_constraint: '>=1.24.0'
